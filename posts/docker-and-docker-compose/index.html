<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker and Docker Compose Cheatsheet | Xudong's Tech Notes</title><meta name=keywords content><meta name=description content="Docker Basic Commands


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18


# View list of Docker images on your system
docker images

# Pull an image from Docker Hub
docker pull image_name

# Run a container from an image
docker run image_name

# View running containers
docker ps

# Kill a running container
docker kill container_id  # Use 'docker ps' to get the container ID

# Advanced useful commands
docker run --name my_container -d image_name  # Run container as daemon with a custom name
docker run --rm -it image_name /bin/bash      # Run container interactively with terminal access


Dockerfile Components
FROM
Specifies the base image to use for building your container."><meta name=author content="Xudong ZHAO"><link rel=canonical href=https://www.xudongzhao.com/posts/docker-and-docker-compose/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.xudongzhao.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://www.xudongzhao.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://www.xudongzhao.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://www.xudongzhao.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://www.xudongzhao.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.xudongzhao.com/posts/docker-and-docker-compose/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://www.xudongzhao.com/posts/docker-and-docker-compose/"><meta property="og:site_name" content="Xudong's Tech Notes"><meta property="og:title" content="Docker and Docker Compose Cheatsheet"><meta property="og:description" content="Docker Basic Commands 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # View list of Docker images on your system docker images # Pull an image from Docker Hub docker pull image_name # Run a container from an image docker run image_name # View running containers docker ps # Kill a running container docker kill container_id # Use 'docker ps' to get the container ID # Advanced useful commands docker run --name my_container -d image_name # Run container as daemon with a custom name docker run --rm -it image_name /bin/bash # Run container interactively with terminal access Dockerfile Components FROM Specifies the base image to use for building your container."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-09T14:15:44+01:00"><meta property="article:modified_time" content="2023-11-09T14:15:44+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker and Docker Compose Cheatsheet"><meta name=twitter:description content="Docker Basic Commands


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18


# View list of Docker images on your system
docker images

# Pull an image from Docker Hub
docker pull image_name

# Run a container from an image
docker run image_name

# View running containers
docker ps

# Kill a running container
docker kill container_id  # Use 'docker ps' to get the container ID

# Advanced useful commands
docker run --name my_container -d image_name  # Run container as daemon with a custom name
docker run --rm -it image_name /bin/bash      # Run container interactively with terminal access


Dockerfile Components
FROM
Specifies the base image to use for building your container."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.xudongzhao.com/posts/"},{"@type":"ListItem","position":2,"name":"Docker and Docker Compose Cheatsheet","item":"https://www.xudongzhao.com/posts/docker-and-docker-compose/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker and Docker Compose Cheatsheet","name":"Docker and Docker Compose Cheatsheet","description":"Docker Basic Commands 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # View list of Docker images on your system docker images # Pull an image from Docker Hub docker pull image_name # Run a container from an image docker run image_name # View running containers docker ps # Kill a running container docker kill container_id # Use \u0026#39;docker ps\u0026#39; to get the container ID # Advanced useful commands docker run --name my_container -d image_name # Run container as daemon with a custom name docker run --rm -it image_name /bin/bash # Run container interactively with terminal access Dockerfile Components FROM Specifies the base image to use for building your container.\n","keywords":[],"articleBody":"Docker Basic Commands 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # View list of Docker images on your system docker images # Pull an image from Docker Hub docker pull image_name # Run a container from an image docker run image_name # View running containers docker ps # Kill a running container docker kill container_id # Use 'docker ps' to get the container ID # Advanced useful commands docker run --name my_container -d image_name # Run container as daemon with a custom name docker run --rm -it image_name /bin/bash # Run container interactively with terminal access Dockerfile Components FROM Specifies the base image to use for building your container.\nENV Environment variables that will be available during container runtime.\nRUN Commands to execute during image build.\nEXPOSE Declares the ports that the container will listen on at runtime.\nCMD Defines the default command to run when starting the container.\nCOPY Copies files from the build context into the image. Supports various formats including tar.gz and tar files.\nARG Build-time variables used during image construction.\nDocker Compose Example with Health Check 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 version: '3' services: mariadb-test: image: mariadb:10.6 ports: # - \"3306:3306\" (uncomment to test DB with external client) volumes: - my-volume:/var/lib/mysql environment: MARIADB_USER: squash-user MARIADB_PASSWORD: password MARIADB_DATABASE: squash MARIADB_ROOT_PASSWORD: azerty healthcheck: test: [\"CMD\", \"healthcheck.sh\", \"--su-mysql\", \"--connect\", \"--innodb_initialized\"] interval: 5s #timeout: 30s #retries: 3 #start_period: 0s squash-tm: image: squash-xzhao:1.0.2 ports: - \"8080:8080\" environment: MY_DB_URL: \"jdbc:mysql://mariadb-test:3306/squash\" MY_DB_TYPE: mariadb MY_DB_USERNAME: squash-user MY_DB_PASSWORD: password depends_on: mariadb-test: condition: service_healthy volumes: my-volume: {} Docker Networks Software-Defined Networking (SDN) Docker uses SDN for container networking and communication.\nDocker Cleanup Commands Check Space Usage 1 docker system df Cleanup Commands 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # Remove all stopped containers docker container prune # Remove all unused volumes docker volume prune # Remove unused images docker image prune # Remove unused networks docker network prune # Remove all unused containers, volumes, images (in this order) docker system prune # Clean up unused build cache generated by Docker Buildx docker buildx prune # More aggressive cleanup of build cache docker buildx prune --all Accessing Running Containers 1 2 3 4 5 # Access container with bash shell docker exec -it /bin/bash # Access container with basic shell (if bash is not available) docker exec -it /bin/sh ","wordCount":"442","inLanguage":"en","datePublished":"2023-11-09T14:15:44+01:00","dateModified":"2023-11-09T14:15:44+01:00","author":{"@type":"Person","name":"Xudong ZHAO"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.xudongzhao.com/posts/docker-and-docker-compose/"},"publisher":{"@type":"Organization","name":"Xudong's Tech Notes","logo":{"@type":"ImageObject","url":"https://www.xudongzhao.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.xudongzhao.com/ accesskey=h title="Xudong's Tech Notes (Alt + H)">Xudong's Tech Notes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.xudongzhao.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://www.xudongzhao.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://www.xudongzhao.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.xudongzhao.com/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.xudongzhao.com/>Home</a>&nbsp;»&nbsp;<a href=https://www.xudongzhao.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Docker and Docker Compose Cheatsheet</h1><div class=post-meta><span class=meta-item><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=post-date>2023-11-09</span>
</span><span class=meta-item><span class=post-word-count>&nbsp;· 442&nbsp;words</span></span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#docker-basic-commands>Docker Basic Commands</a></li><li><a href=#dockerfile-components>Dockerfile Components</a><ul><li><a href=#from>FROM</a></li><li><a href=#env>ENV</a></li><li><a href=#run>RUN</a></li><li><a href=#expose>EXPOSE</a></li><li><a href=#cmd>CMD</a></li><li><a href=#copy>COPY</a></li><li><a href=#arg>ARG</a></li></ul></li><li><a href=#docker-compose>Docker Compose</a><ul><li><a href=#example-with-health-check>Example with Health Check</a></li></ul></li><li><a href=#docker-networks>Docker Networks</a><ul><li><a href=#software-defined-networking-sdn>Software-Defined Networking (SDN)</a></li></ul></li><li><a href=#docker-cleanup-commands>Docker Cleanup Commands</a><ul><li><a href=#check-space-usage>Check Space Usage</a></li><li><a href=#cleanup-commands>Cleanup Commands</a></li></ul></li><li><a href=#accessing-running-containers>Accessing Running Containers</a></li></ul></nav></div></details></div><div class=post-content><h2 id=docker-basic-commands>Docker Basic Commands<a hidden class=anchor aria-hidden=true href=#docker-basic-commands>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># View list of Docker images on your system</span>
</span></span><span class=line><span class=cl>docker images
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Pull an image from Docker Hub</span>
</span></span><span class=line><span class=cl>docker pull image_name
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Run a container from an image</span>
</span></span><span class=line><span class=cl>docker run image_name
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View running containers</span>
</span></span><span class=line><span class=cl>docker ps
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kill a running container</span>
</span></span><span class=line><span class=cl>docker <span class=nb>kill</span> container_id  <span class=c1># Use &#39;docker ps&#39; to get the container ID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Advanced useful commands</span>
</span></span><span class=line><span class=cl>docker run --name my_container -d image_name  <span class=c1># Run container as daemon with a custom name</span>
</span></span><span class=line><span class=cl>docker run --rm -it image_name /bin/bash      <span class=c1># Run container interactively with terminal access</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=dockerfile-components>Dockerfile Components<a hidden class=anchor aria-hidden=true href=#dockerfile-components>#</a></h2><h3 id=from>FROM<a hidden class=anchor aria-hidden=true href=#from>#</a></h3><p>Specifies the base image to use for building your container.</p><h3 id=env>ENV<a hidden class=anchor aria-hidden=true href=#env>#</a></h3><p>Environment variables that will be available during container runtime.</p><h3 id=run>RUN<a hidden class=anchor aria-hidden=true href=#run>#</a></h3><p>Commands to execute during image build.</p><h3 id=expose>EXPOSE<a hidden class=anchor aria-hidden=true href=#expose>#</a></h3><p>Declares the ports that the container will listen on at runtime.</p><h3 id=cmd>CMD<a hidden class=anchor aria-hidden=true href=#cmd>#</a></h3><p>Defines the default command to run when starting the container.</p><h3 id=copy>COPY<a hidden class=anchor aria-hidden=true href=#copy>#</a></h3><p>Copies files from the build context into the image.
Supports various formats including tar.gz and tar files.</p><h3 id=arg>ARG<a hidden class=anchor aria-hidden=true href=#arg>#</a></h3><p>Build-time variables used during image construction.</p><h2 id=docker-compose>Docker Compose<a hidden class=anchor aria-hidden=true href=#docker-compose>#</a></h2><h3 id=example-with-health-check>Example with Health Check<a hidden class=anchor aria-hidden=true href=#example-with-health-check>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27>27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28>28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29>29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30>30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31>31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32>32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33>33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34>34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35>35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36>36</a>
</span><span class=lnt id=hl-1-37><a class=lnlinks href=#hl-1-37>37</a>
</span><span class=lnt id=hl-1-38><a class=lnlinks href=#hl-1-38>38</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mariadb-test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mariadb:10.6</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># - &#34;3306:3306&#34; (uncomment to test DB with external client)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>my-volume:/var/lib/mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MARIADB_USER</span><span class=p>:</span><span class=w> </span><span class=l>squash-user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MARIADB_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>password</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MARIADB_DATABASE</span><span class=p>:</span><span class=w> </span><span class=l>squash</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MARIADB_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>azerty</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;CMD&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;healthcheck.sh&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;--su-mysql&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;--connect&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;--innodb_initialized&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>5s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#timeout: 30s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#retries: 3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#start_period: 0s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>squash-tm</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>squash-xzhao:1.0.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=s2>&#34;8080:8080&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MY_DB_URL</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;jdbc:mysql://mariadb-test:3306/squash&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MY_DB_TYPE</span><span class=p>:</span><span class=w> </span><span class=l>mariadb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MY_DB_USERNAME</span><span class=p>:</span><span class=w> </span><span class=l>squash-user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MY_DB_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>password</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>mariadb-test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=l>service_healthy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>my-volume</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=docker-networks>Docker Networks<a hidden class=anchor aria-hidden=true href=#docker-networks>#</a></h2><h3 id=software-defined-networking-sdn>Software-Defined Networking (SDN)<a hidden class=anchor aria-hidden=true href=#software-defined-networking-sdn>#</a></h3><p>Docker uses SDN for container networking and communication.</p><h2 id=docker-cleanup-commands>Docker Cleanup Commands<a hidden class=anchor aria-hidden=true href=#docker-cleanup-commands>#</a></h2><h3 id=check-space-usage>Check Space Usage<a hidden class=anchor aria-hidden=true href=#check-space-usage>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker system df 
</span></span></code></pre></td></tr></table></div></div><h3 id=cleanup-commands>Cleanup Commands<a hidden class=anchor aria-hidden=true href=#cleanup-commands>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Remove all stopped containers</span>
</span></span><span class=line><span class=cl>docker container prune
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Remove all unused volumes</span>
</span></span><span class=line><span class=cl>docker volume prune
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Remove unused images</span>
</span></span><span class=line><span class=cl>docker image prune
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Remove unused networks</span>
</span></span><span class=line><span class=cl>docker network prune
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Remove all unused containers, volumes, images (in this order)</span>
</span></span><span class=line><span class=cl>docker system prune
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Clean up unused build cache generated by Docker Buildx</span>
</span></span><span class=line><span class=cl>docker buildx prune
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># More aggressive cleanup of build cache</span>
</span></span><span class=line><span class=cl>docker buildx prune --all
</span></span></code></pre></td></tr></table></div></div><h2 id=accessing-running-containers>Accessing Running Containers<a hidden class=anchor aria-hidden=true href=#accessing-running-containers>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Access container with bash shell</span>
</span></span><span class=line><span class=cl>docker <span class=nb>exec</span> -it &lt;container_name&gt; /bin/bash
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Access container with basic shell (if bash is not available)</span>
</span></span><span class=line><span class=cl>docker <span class=nb>exec</span> -it &lt;container_name&gt; /bin/sh
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://www.xudongzhao.com/posts/cmd-cheatsheet/><span class=title>« Prev</span><br><span>Cmd Cheatsheet</span>
</a><a class=next href=https://www.xudongzhao.com/posts/robot-framework/><span class=title>Next »</span><br><span>Robot Framework</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Docker and Docker Compose Cheatsheet on x" href="https://x.com/intent/tweet/?text=Docker%20and%20Docker%20Compose%20Cheatsheet&amp;url=https%3a%2f%2fwww.xudongzhao.com%2fposts%2fdocker-and-docker-compose%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Docker and Docker Compose Cheatsheet on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.xudongzhao.com%2fposts%2fdocker-and-docker-compose%2f&amp;title=Docker%20and%20Docker%20Compose%20Cheatsheet&amp;summary=Docker%20and%20Docker%20Compose%20Cheatsheet&amp;source=https%3a%2f%2fwww.xudongzhao.com%2fposts%2fdocker-and-docker-compose%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Docker and Docker Compose Cheatsheet on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.xudongzhao.com%2fposts%2fdocker-and-docker-compose%2f&title=Docker%20and%20Docker%20Compose%20Cheatsheet"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Docker and Docker Compose Cheatsheet on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.xudongzhao.com%2fposts%2fdocker-and-docker-compose%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Docker and Docker Compose Cheatsheet on whatsapp" href="https://api.whatsapp.com/send?text=Docker%20and%20Docker%20Compose%20Cheatsheet%20-%20https%3a%2f%2fwww.xudongzhao.com%2fposts%2fdocker-and-docker-compose%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Docker and Docker Compose Cheatsheet on telegram" href="https://telegram.me/share/url?text=Docker%20and%20Docker%20Compose%20Cheatsheet&amp;url=https%3a%2f%2fwww.xudongzhao.com%2fposts%2fdocker-and-docker-compose%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Docker and Docker Compose Cheatsheet on ycombinator" href="https://news.ycombinator.com/submitlink?t=Docker%20and%20Docker%20Compose%20Cheatsheet&u=https%3a%2f%2fwww.xudongzhao.com%2fposts%2fdocker-and-docker-compose%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.xudongzhao.com/>Xudong's Tech Notes</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>